help(lm)
#---------------------------------------
# disconnect and unload driver when done
dbDisconnect(con)
dbUnloadDriver(drv)
library("RPostgreSQL")
#---------------------------------------
# disconnect and unload driver when done
dbDisconnect(con)
dbUnloadDriver(drv)
setwd("~/anaconda3/envs/notebook/analysis/ignore/children_hospitals")
library(tidyverse)
df <- read.csv("data.csv", header=T, na.strings=c("-","NA"))
summary(df)
# save summary stats in a dataframe so we can refer to them later
dfsum <- data.frame(unclass(summary(df)), check.names = FALSE, stringsAsFactors = FALSE)
write_csv(dfsum,'data_summary.csv')
View(dfsum)
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 12
)
View(df)
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df,
fill=factor(fy),
bins = 30
)
setwd("~/anaconda3/envs/notebook/analysis/ignore/children_hospitals")
library(tidyverse)
options("scipen" = 10)
df <- read.csv("data.csv", header=T, na.strings=c("-","NA"))
summary(df)
# save summary stats in a dataframe so we can refer to them later
dfsum <- data.frame(unclass(summary(df)), check.names = FALSE, stringsAsFactors = FALSE)
write_csv(dfsum,'data_summary.csv')
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df,
fill=factor(fy),
bins = 30
)
years <- table(df$fy)
years
df5 <- filter(df$fy != c("2011","2018"))
years5 <- table(df$fy)
years5
years5 <- table(df5$fy)
df5 <- filter(df$fy %in% c("2012","2013","2014","2015","2016","2017"))
years5 <- table(df5$fy)
df5 <- filter(!df$fy %in% c("2011","2018"))
df5 <- filter(!df, fy %in% c("2011","2018"))
df5 <- filter(!df, fy %in% c(2011,2018))
df5 <- filter(df, !fy %in% c(2011,2018))
years5 <- table(df5$fy)
years5
qplot(totalNPR,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df5,
fill=factor(fy),
bins = 30
)
View(df5)
setwd("~/anaconda3/envs/notebook/crainshack/data/teachers")
library("tidyverse")
teachers <- read_csv("teachers.csv")
# regex, or regular expression, is an adventure
# this will return all schools with roo in them
df <- select(teachers,'school') %>% filter( str_detect(school, regex('roo', ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "roo" at the beginning of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex(^('roo')[a-z]+, ignore_case=TRUE) ) )
# this appears to do the same thing, but is looking for schools with "roo" at the beginning of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("^(roo)[a-z]+", ignore_case=TRUE) ) )
df
words <- c("Roosevelt", "Moosevelt", "Soosavelt", "Rooseveld", "Roosevelta")
str_detect(words, regex("[a-z]+(velt)$", ignore_case = TRUE))
# this appears to do the same thing, but is looking for schools with "roo" at the beginning of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
df
str_detect(words, regex('roo', ignore_case=TRUE) )
words <- c("Roosevelt", "Moosevelt", "Soosavelt", "Rooseveld", "Roosevelta", "Toroosevelt")
str_detect(words, regex('roo', ignore_case=TRUE) )
# would return Sam or sam
df <- select(teachers,'first_name','last_name') %>% filter( str_detect(first_name, regex('sam', ignore_case=TRUE) ) )
df
View(teachers)
df <- str_detect(words, regex("[a-z]+(velt)$", ignore_case = TRUE))
df
select(teachers,'school') %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
# this appears to do the same thing, but is looking for schools with "roo" at the beginning of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
df
View(df)
str_detect(teachers, regex("[a-z]+(velt)$", ignore_case=TRUE) )
# this appears to do the same thing, but is looking for schools with "roo" at the beginning of a word
df <- select(teachers['school'],'school') %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
str_detect(teachers['school'], regex("[a-z]+(velt)$", ignore_case=TRUE) )
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("(velt)$", ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("velt", ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("^velt$", ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("velt$", ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("velt", ignore_case=TRUE) ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[a-z]*velt$", ignore_case=TRUE) ) )
df
df <- str_detect(school, regex("[a-z]*velt$", ignore_case=TRUE) )
df <- str_detect(words, regex("[a-z]*velt$", ignore_case=TRUE) )
df
words <- c("Roosevelt", "Moosevelt", "Soosavelt", "Rooseveld", "Roosevelta", "Toroosevelta")
str_detect(words, regex('roo', ignore_case=TRUE) )
df <- str_detect(words, regex("[a-z]*velt$", ignore_case=TRUE) )
df
str_detect(words, regex('roo', ignore_case=TRUE) )
str_detect(words, regex("[a-z]*velt$", ignore_case=TRUE) )
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[A-Za-z]*velt$") ) )
df
select(teachers,'school') %>% filter( str_detect(school, regex("[A-Za-z]*velt$") ) )
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school')# %>% filter( str_detect(school, regex("[A-Za-z]*velt$") ) )
df
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[A-Za-z]+velt$") ) )
df
str_detect(words, regex("[a-z]+velt$", ignore_case=TRUE) )
str_detect(words, regex("[a-z]+(velt)$", ignore_case=TRUE) )
# this appears to do the same thing, but is looking for schools with "velt" at the end of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("[A-Za-z]+(velt)$") ) )
df
str_detect(teachers['school'], regex("[a-z]+(velt)$", ignore_case=TRUE) )
# this should looking for schools with "velt" at the beginning of a word
df <- select(teachers,'school') %>% filter( str_detect(school, regex("^(velt)[A-Za-z]+") ) )
df
# this should looking for schools with "velt" at the end of a word
# but I'm having trouble getting it to work
df <- select(teachers,'school') %>% str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) )
# regex, or regular expression, is an adventure
# this will return all schools with velt in them
df <- select(teachers,'school') %>% filter( str_detect(school, regex('velt', ignore_case=TRUE) ) )
df
# regex, or regular expression, is an adventure
# this will return all schools with velt in them
df <- select(teachers,'first_name','last_name','school') %>% filter( str_detect(school, regex('velt', ignore_case=TRUE) ) )
df
# this should looking for schools with "velt" at the end of a word
# but I'm having trouble getting it to work
df <- select(teachers,'first_name','last_name','school') %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
df
# this should looking for schools with "velt" at the beginning of a word
# but I'm having trouble getting it to work
df <- select(teachers,'first_name','last_name','school') %>% filter( str_detect(school, regex("^(velt)[a-z]+", ignore_case=TRUE) ) )
df
teachers[ str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) ]
teachers[ str_detect(teachers['school'], regex("[a-z]+(velt)$", ignore_case=TRUE) ) ]
teachers[ str_detect(teachers, regex("[a-z]+(velt)$", ignore_case=TRUE) ) ]
# this should looking for schools with "velt" at the end of a word
# but I'm having trouble getting it to work
df <- select(teachers,'school')# %>% filter( str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) )
df
df[ str_detect(school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) ]
df[ str_detect(df.school, regex("[a-z]+(velt)$", ignore_case=TRUE) ) ]
str_detect(df["school"], regex("[a-z]+(velt)$", ignore_case=TRUE) )
