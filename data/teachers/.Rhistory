help(lm)
#---------------------------------------
# disconnect and unload driver when done
dbDisconnect(con)
dbUnloadDriver(drv)
library("RPostgreSQL")
#---------------------------------------
# disconnect and unload driver when done
dbDisconnect(con)
dbUnloadDriver(drv)
setwd("~/anaconda3/envs/notebook/analysis/ignore/children_hospitals")
library(tidyverse)
df <- read.csv("data.csv", header=T, na.strings=c("-","NA"))
summary(df)
# save summary stats in a dataframe so we can refer to them later
dfsum <- data.frame(unclass(summary(df)), check.names = FALSE, stringsAsFactors = FALSE)
write_csv(dfsum,'data_summary.csv')
View(dfsum)
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 12
)
View(df)
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df,
fill=factor(fy),
bins = 30
)
setwd("~/anaconda3/envs/notebook/analysis/ignore/children_hospitals")
library(tidyverse)
options("scipen" = 10)
df <- read.csv("data.csv", header=T, na.strings=c("-","NA"))
summary(df)
# save summary stats in a dataframe so we can refer to them later
dfsum <- data.frame(unclass(summary(df)), check.names = FALSE, stringsAsFactors = FALSE)
write_csv(dfsum,'data_summary.csv')
qplot(totalNPR,
data=df,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df,
fill=factor(fy),
bins = 30
)
years <- table(df$fy)
years
df5 <- filter(df$fy != c("2011","2018"))
years5 <- table(df$fy)
years5
years5 <- table(df5$fy)
df5 <- filter(df$fy %in% c("2012","2013","2014","2015","2016","2017"))
years5 <- table(df5$fy)
df5 <- filter(!df$fy %in% c("2011","2018"))
df5 <- filter(!df, fy %in% c("2011","2018"))
df5 <- filter(!df, fy %in% c(2011,2018))
df5 <- filter(df, !fy %in% c(2011,2018))
years5 <- table(df5$fy)
years5
qplot(totalNPR,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(margin,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(net_income,
data=df5,
fill=factor(fy),
bins = 30
)
qplot(compensation_perc,
data=df5,
fill=factor(fy),
bins = 30
)
View(df5)
setwd("~/anaconda3/envs/pracSQL/Chapter_02_slicing")
library("RPostgreSQL")
library("tidyverse")
# loads the PostgreSQL driver
drv <- dbDriver("PostgreSQL")
# creates a connection to the postgres database
con <- dbConnect(drv, dbname = "aranalysis",
host = "localhost", port = 5432,
user = "tbroderick")#, password = pw)
#test to see if connection works, and teachers table is there
dbExistsTable(con, "teachers")
# Basic syntax for running sql requests
teachers <- dbGetQuery(con, "SELECT * from teachers")
write_csv(teachers,"teachers.csv")
setwd("~/")
setwd("~/anaconda3/envs/notebook/crainshack/data/teachers")
teachers <- read_csv("teachers.csv")
# school is Roosevelt, salary is < 38999 or > 40000
df <- select(teachers,'last_name','first_name','school','salary') %>% filter( school == "F.D. Roosevelt HS" & (salary < 38000 | salary > 40000)  )
df
# the . means the phrase could be part of a complete word, but specifically be at the beginning
df <- select(teachers,'school') %>% filter( str_detect(school, regex('velt', ignore_case=TRUE) ) )
df
# the . means the phrase could be part of a complete word, but specifically be at the beginning
df <- select(teachers,'school') %>% filter( str_detect(school, regex('velt.', ignore_case=TRUE) ) )
df
summary(teachers)
sapply(teachers)
sapply(teachers, class)
# we can save these to refer to the later. This code puts the summary stats into a dataframe
# and then saves it as a csv file we can open in excel if we want
dfsum <- data.frame(unclass(summary(teachers)), check.names = FALSE, stringsAsFactors = FALSE)
write_csv(dfsum,'teachers_summary.csv')
View(dfsum)
